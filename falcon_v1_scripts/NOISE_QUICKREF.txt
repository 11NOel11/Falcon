â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘               REALISTIC EVAL-TIME NOISE - QUICK REFERENCE                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š NOISE LEVEL RECOMMENDATIONS (Image Space [0,1])
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  Ïƒ = 0.02    Light noise      (minimal corruption, ~2% pixel std)
  Ïƒ = 0.04    Moderate noise   (typical robustness test)
  Ïƒ = 0.06    Heavy noise      (realistic upper bound)
  
  âš ï¸  OLD: Ïƒ = 0.15 on normalized â†’ ~0.75 pixel space (TOO EXTREME)

ğŸ”„ HOW IT WORKS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  1. Detect Normalization  â† Check if values outside [0,1]
     â†“
  2. Denormalize (if needed) â†’ Convert to pixel space [0,1]
     â†“
  3. Add Gaussian Noise    â† Ïƒ in meaningful pixel units
     â†“
  4. Apply High-Pass Filter â† Gentle Laplacian (0.08 blend)
     â†“
  5. Clamp to [0,1]        â† Keep valid pixel range
     â†“
  6. Re-normalize (if needed) â†’ Return in original format

ğŸ“ USAGE EXAMPLES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# Clean evaluation (baseline)
python train.py --optimizer adamw --eval-only --load runs/A1_full/best.pt

# Light noise robustness test
python train.py --optimizer adamw --eval-only --load runs/A1_full/best.pt \
    --test-highfreq-noise 0.02

# Moderate noise robustness test  
python train.py --optimizer muon --eval-only --load runs/M1_full_lr125/best.pt \
    --test-highfreq-noise 0.04

# Heavy noise robustness test
python train.py --optimizer falcon --eval-only --load runs/F1_v3/best.pt \
    --test-highfreq-noise 0.06

ğŸ” COMPARISON: OLD vs NEW
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  OLD APPROACH:
  âœ— Applied noise to normalized data (meaningless scale)
  âœ— Ïƒ=0.15 on normalized â‰ˆ Ïƒ=0.75 in pixels (extreme)
  âœ— Strong high-pass (0.25 blend factor)
  âœ— No clamping â†’ could produce invalid pixel values
  
  NEW APPROACH:
  âœ“ Works in pixel space [0,1] (meaningful scale)
  âœ“ Recommended Ïƒ=0.02-0.06 (realistic noise levels)
  âœ“ Gentle high-pass (0.08 blend factor)
  âœ“ Clamps to valid range [0,1]
  âœ“ Automatic normalization detection & handling
  âœ“ Returns data in same format as input

ğŸ“ˆ EXPECTED ACCURACY DROPS (CIFAR-10 / VGG11)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  Noise Level    AdamW      Muon       FALCON v3
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Clean          88-89%     89-90%     90-91%
  Ïƒ = 0.02       87-88%     88-89%     89-90%     (âˆ’1% typical)
  Ïƒ = 0.04       85-87%     86-88%     87-89%     (âˆ’2-3% typical)
  Ïƒ = 0.06       83-85%     84-86%     85-87%     (âˆ’4-5% typical)

ğŸ’¡ KEY INSIGHTS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  â€¢ Noise in PIXEL SPACE [0,1] is meaningful: Ïƒ=0.04 â‰ˆ 4% of full range
  â€¢ Noise in NORMALIZED SPACE is confusing: depends on dataset stats
  â€¢ High-pass filter emphasizes edges/textures (tests different failure modes)
  â€¢ FALCON v3 typically more robust due to frequency-domain training
  â€¢ Realistic noise levels: 0.02-0.06 (not 0.15!)

ğŸ”§ TECHNICAL DETAILS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  CIFAR-10 Normalization:
    MEAN = [0.4914, 0.4822, 0.4465]
    STD  = [0.2023, 0.1994, 0.2010]
  
  Laplacian Kernel:
    [[0, -1,  0]
     [-1, 4, -1]
     [0, -1,  0]]
  
  High-Pass Blend: x_noisy + 0.08 * laplacian(x_noisy)

âš ï¸  MIGRATION GUIDE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  If you were using --test-highfreq-noise 0.15:
  
  OLD:  --test-highfreq-noise 0.15  (too extreme!)
  NEW:  --test-highfreq-noise 0.04  (realistic moderate noise)
  
  Recommended conversion:
    0.15 (old) â†’ 0.04-0.06 (new)  for comparable robustness testing

âœ… VALIDATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  âœ“ Automatic normalization detection
  âœ“ Works with both normalized and raw [0,1] inputs
  âœ“ Meaningful noise scale (pixel space)
  âœ“ Gentler, more realistic corruption
  âœ“ Proper value clamping
  âœ“ Backward compatible (just use smaller Ïƒ values)

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     Use Ïƒ=0.02-0.06 for realistic robustness testing in pixel space!        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
